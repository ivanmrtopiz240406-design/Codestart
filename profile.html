<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ü—Ä–æ—Ñ–∏–ª—å ‚Äî CodeStart</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Inter',sans-serif;
  background:
    radial-gradient(circle at 20% 30%, rgba(0,230,118,0.08), transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(0,188,212,0.08), transparent 40%),
    linear-gradient(135deg,#14151c,#1b1d27 40%,#12131a);
  color:#fff;
}

/* ===== –í–ï–†–•–ù–ï–ï –ú–ï–ù–Æ –í –°–¢–ò–õ–ï CODESTART ===== */
/* ====== CODESTART TOP MENU ====== */
.top-menu{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:16px 40px;
  background:linear-gradient(90deg,#11131a,#151822);
  backdrop-filter:blur(12px);
  box-shadow:0 6px 25px rgba(0,0,0,0.45);
  z-index:1000;
  box-sizing:border-box;
}

.logo{
  font-weight:700;
  font-size:22px;
  color:#00e676;
  letter-spacing:1px;
}

.menu-links{
  display:flex;
  gap:14px;
  align-items:center;
  flex-wrap:wrap;
}

/* –ö–ù–û–ü–ö–ò –ú–ï–ù–Æ */
.menu-links a{
  text-decoration:none;
  color:#e6e6e6;
  font-weight:600;
  padding:8px 16px;
  border-radius:10px;
  font-size:14px;
  transition:all 0.25s ease;
  border:1px solid transparent;
  white-space:nowrap;
}

/* üíö –ù–ê–í–ï–î–ï–ù–ò–ï ‚Äî –ó–ï–õ–Å–ù–ê–Ø –û–ë–í–û–î–ö–ê */
.menu-links a:hover{
  color:#00e676;
  border:1px solid #00e676;
  background:rgba(0,230,118,0.08);
}

/* –ê–ö–¢–ò–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê */
.menu-links a.active{
  color:#00e676;
  border:1px solid #00e676;
  background:rgba(0,230,118,0.12);
}

/* üë§ –ò–ö–û–ù–ö–ê –ü–†–û–§–ò–õ–Ø */
.profile-badge{
  min-width:38px;
  height:38px;
  padding:0 12px;
  border-radius:50px;
  background:linear-gradient(45deg,#00e676,#00bcd4);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  color:#000;
  cursor:pointer;
  box-shadow:0 0 12px rgba(0,230,118,0.5);
  font-size:14px;
}

/* ===== –û–°–ù–û–í–ê ===== */
.container{
  max-width:1100px;
  margin:auto;
  padding:130px 20px 60px;
}

.profile-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:25px;
}

/* ===== –ö–ê–†–¢–û–ß–ö–ò –í –°–¢–ò–õ–ï CODESTART ===== */
.card{
  background:linear-gradient(145deg,#1c1f2b,#151822);
  padding:25px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.05);
  box-shadow:0 10px 25px rgba(0,0,0,0.45);
  transition:0.3s;
}

.card:hover{
  transform:translateY(-6px);
  box-shadow:0 15px 35px rgba(0,230,118,0.15);
  border:1px solid rgba(0,230,118,0.25);
}

.card h2{
  margin-top:0;
  margin-bottom:15px;
  background:linear-gradient(45deg,#00e676,#00bcd4);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* –ü–û–õ–Ø */
.profile-input{
  background:#1a1c23;
  border:1px solid #333;
  color:#fff;
  font-size:15px;
  font-weight:600;
}

input{
  width:100%;
  padding:12px;
  margin-top:6px;
  margin-bottom:12px;
  border-radius:10px;
  border:none;
  outline:none;
}

/* –ö–ù–û–ü–ö–ò */
button{
  background:linear-gradient(45deg,#00e676,#00c853);
  border:none;
  padding:10px 16px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
  margin-top:5px;
  transition:0.2s;
}

button:hover{ transform:scale(1.05); }

.logout{
  background:linear-gradient(45deg,#ff5252,#ff1744);
}

/* –î–û–°–¢–ò–ñ–ï–ù–ò–Ø */
.badge{
  display:inline-block;
  background:linear-gradient(45deg,#ff9800,#ffd54f);
  color:#000;
  padding:8px 12px;
  border-radius:10px;
  margin:6px 6px 0 0;
  font-size:13px;
  font-weight:700;
  box-shadow:0 4px 10px rgba(0,0,0,0.3);
}

/* –£–†–û–ö–ò */
.lesson-done{
  background:#1b5e20;
  padding:8px 10px;
  border-radius:8px;
  margin-bottom:6px;
  font-weight:600;
  box-shadow:0 3px 8px rgba(0,0,0,0.3);
}

.level{
  font-size:20px;
  font-weight:700;
  color:#ffd54f;
}
</style>
</head>

<body>

<div class="top-menu">
  <div class="logo">CodeStart</div>
  <div class="menu-links">
    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="lesson.html">–û–±—É—á–µ–Ω–∏–µ</a>
    <a href="subscribe.html">–ü–æ–¥–ø–∏—Å–∫–∞</a>
    <div class="profile-badge" id="profileBadge" onclick="location.href='profile.html'">?</div>
  </div>
</div>

<div class="container">
  <div class="profile-grid">

    <div class="card">
      <h2>üë§ –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
      <label>–ò–º—è</label>
      <input type="text" id="nameInput" class="profile-input">

      <label>Email</label>
      <input type="email" id="emailInput" class="profile-input">

      <button onclick="saveProfile()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button class="logout" onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
    </div>

    <div class="card">
      <h2>üîí –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h2>
      <input type="password" id="oldPass" placeholder="–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å">
      <input type="password" id="newPass" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å">
      <button onclick="changePassword()">–û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
    </div>

    <div class="card">
      <h2>üíé –ü–æ–¥–ø–∏—Å–∫–∞</h2>
      <p id="subStatus">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏</p>
      <button onclick="location.href='subscribe.html'">–£–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–æ–π</button>
    </div>

    <div class="card">
      <h2>‚≠ê –£—Ä–æ–≤–µ–Ω—å</h2>
      <div class="level" id="userLevel">–ù–æ–≤–∏—á–æ–∫</div>
    </div>

    <div class="card">
      <h2>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
      <div id="achievements"></div>
    </div>

    <div class="card">
      <h2>üìö –ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —É—Ä–æ–∫–∏</h2>
      <div id="completedLessons"></div>
    </div>

  </div>
</div>

<script>
const currentEmail = localStorage.getItem("currentUser");
if(!currentEmail){ window.location.href="auth.html"; }

const userKey = "user_" + currentEmail;
let userData = JSON.parse(localStorage.getItem(userKey)) || { achievements:[], lessonsCompleted:[] };

let globalUser = JSON.parse(localStorage.getItem("codestart_user"));
if(globalUser){
  userData.achievements = [...new Set([...(userData.achievements||[]), ...(globalUser.achievements||[])])];
  userData.lessonsCompleted = [...new Set([...(userData.lessonsCompleted||[]), ...(globalUser.completedLessons||[])])];
  localStorage.setItem(userKey, JSON.stringify(userData));
}

function loadProfile(){
  nameInput.value = userData.name || "";
  emailInput.value = userData.email || "";

  if(userData.subscription){
    subStatus.innerHTML = "–ê–∫—Ç–∏–≤–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞: <b>"+userData.subscription+"</b>";
  }

  loadAchievements();
  loadLessons();
  updateLevel();
  loadBadge();
}

function loadBadge(){
  const badge=document.getElementById("profileBadge");
  if(userData.name){
    badge.innerText=userData.name.charAt(0).toUpperCase();
  }else{
    badge.innerText="üë§";
  }
}

function saveProfile(){
  userData.name = nameInput.value.trim();
  userData.email = emailInput.value.trim();
  localStorage.setItem(userKey, JSON.stringify(userData));
  loadBadge();
  alert("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!");
}

function changePassword(){
  if(oldPass.value !== userData.password){
    alert("–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å –Ω–µ–≤–µ—Ä–Ω—ã–π");
    return;
  }
  userData.password = newPass.value;
  localStorage.setItem(userKey, JSON.stringify(userData));
  alert("–ü–∞—Ä–æ–ª—å –æ–±–Ω–æ–≤–ª—ë–Ω!");
  oldPass.value=""; newPass.value="";
}

function logout(){
  localStorage.removeItem("currentUser");
  window.location.href="auth.html";
}

function loadAchievements(){
  achievements.innerHTML="";
  if(!userData.achievements?.length){
    achievements.innerHTML="–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π";
    return;
  }
  userData.achievements.forEach(a=>{
    achievements.innerHTML+=`<div class="badge">${a}</div>`;
  });
}

function loadLessons(){
  completedLessons.innerHTML="";
  if(!userData.lessonsCompleted?.length){
    completedLessons.innerHTML="–£—Ä–æ–∫–∏ –µ—â—ë –Ω–µ –ø—Ä–æ–π–¥–µ–Ω—ã";
    return;
  }
  userData.lessonsCompleted.forEach(l=>{
    completedLessons.innerHTML+=`<div class="lesson-done">${l} ‚úÖ</div>`;
  });
}

function updateLevel(){
  const count = userData.lessonsCompleted.length;
  let level = "–ù–æ–≤–∏—á–æ–∫";
  if(count >= 3) level = "–£—á–µ–Ω–∏–∫";
  if(count >= 6) level = "–ü—Ä–∞–∫—Ç–∏–∫";
  if(count >= 10) level = "–ö–æ–¥–µ—Ä";
  if(count >= 20) level = "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫";
  userLevel.innerText = level;
}

loadProfile();
</script>

</body>
</html>
